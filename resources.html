<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="images/icons/icon.png" sizes="16x16" type="image/png">
    <title>å­¸ç¿’è³‡æº - 3Dç­</title>
    <style>
        /* å…±ç”¨æ¨£å¼ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', 'Microsoft JhengHei', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* å°èˆªæ¬„æ¨£å¼ */
        nav {
            background: #35424a;
            color: white;
            padding: 1rem 0;
        }
        
        nav .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 130%;
            font-weight: bold;
        }
        
        .nav-links {
            list-style: none;
            display: flex;
        }
        
        .nav-links li {
            margin-left: 2rem;
        }
        
        .nav-links a {
            color: white;
            text-decoration: none;
            transition: color 0.3s, background-color 0.3s;
            padding: 0.5rem;
            border-radius: 4px;
            min-height: 44px;
            display: inline-flex;
            align-items: center;
        }
        
        .nav-links a:hover,
        .nav-links a:focus {
            color: #e8491d;
            background-color: rgba(255, 255, 255, 0.1);
            outline: 2px solid #e8491d;
        }
        
        /* é é¢æ¨™é ­ */
        .page-header {
            text-align: center;
            padding: 3rem 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .page-header h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        
        /* è³‡æºåˆ†é¡ */
        .resource-categories {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 1rem;
            margin: 2rem 0;
            padding: 0 1rem;
        }
        
        .category-btn {
            padding: 0.8rem 2rem;
            border: 2px solid #35424a;
            background: white;
            color: #35424a;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            font-size: 1rem;
            min-height: 44px;
        }
        
        .category-btn:hover,
        .category-btn:focus,
        .category-btn.active {
            background: #35424a;
            color: white;
            outline: 2px solid #667eea;
        }
        
        /* è³‡æºå¡ç‰‡ */
        .resources-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 2rem;
            padding: 2rem 0;
        }
        
        .resource-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            overflow: hidden;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .resource-card:hover,
        .resource-card:focus-within {
            transform: translateY(-5px);
            box-shadow: 0 6px 25px rgba(0,0,0,0.15);
        }
        
        .resource-icon {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1.5rem;
            text-align: center;
            font-size: 2rem;
        }
        
        .resource-content {
            padding: 1.5rem;
        }
        
        .resource-title {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            color: #35424a;
        }
        
        .resource-description {
            color: #666;
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }
        
        .resource-link {
            display: inline-block;
            padding: 0.8rem 1.5rem;
            background: #35424a;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            transition: background 0.3s;
            min-height: 44px;
            display: inline-flex;
            align-items: center;
        }
        
        .resource-link:hover,
        .resource-link:focus {
            background: #e8491d;
            outline: 2px solid #e8491d;
            outline-offset: 2px;
        }
        
        .resource-meta {
            display: flex;
            justify-content: space-between;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #eee;
            color: #888;
            font-size: 0.9rem;
        }
        
        /* æœå°‹å€ */
        .search-section {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            margin: 2rem 0;
            box-shadow: 0 2px 15px rgba(0,0,0,0.1);
        }
        
        .search-box {
            display: flex;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .search-input {
            flex: 1;
            padding: 1rem;
            border: 2px solid #ddd;
            border-radius: 6px 0 0 6px;
            font-size: 1rem;
            min-height: 44px;
        }
        
        .search-input:focus {
            border-color: #667eea;
            outline: 2px solid rgba(102, 126, 234, 0.3);
        }
        
        .search-btn {
            padding: 1rem 1.5rem;
            background: #35424a;
            color: white;
            border: none;
            border-radius: 0 6px 6px 0;
            cursor: pointer;
            min-height: 44px;
        }
        
        .search-btn:hover,
        .search-btn:focus {
            background: #e8491d;
            outline: 2px solid #e8491d;
        }
        
        /* ç„¡çµæœæç¤º */
        .no-results {
            grid-column: 1 / -1;
            text-align: center;
            padding: 3rem;
            color: #666;
        }
        
        /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 768px) {
            .resources-grid {
                grid-template-columns: 1fr;
            }
            
            .resource-categories {
                flex-direction: column;
                align-items: center;
            }
            
            .category-btn {
                width: 250px;
            }
            
            .nav-links {
                flex-direction: column;
            }
            
            .nav-links li {
                margin: 0.5rem 0;
            }
            
            .search-box {
                flex-direction: column;
            }
            
            .search-input {
                border-radius: 6px;
                margin-bottom: 1rem;
            }
            
            .search-btn {
                border-radius: 6px;
            }
        }
        
        /* é å°¾æ¨£å¼ */
        footer {
            background: #35424a;
            color: white;
            text-align: center;
            padding: 2rem 0;
            margin-top: 3rem;
        }
    </style>
</head>
<body>
    <!-- è·³è½‰éˆæ¥ - å¹«åŠ©éµç›¤ç”¨æˆ¶å¿«é€Ÿè·³è½‰åˆ°ä¸»è¦å…§å®¹ -->
    <a href="#main-content" class="skip-link" style="position:absolute; top:-40px; left:0; background:#35424a; color:white; padding:8px; z-index:100;">è·³è½‰åˆ°ä¸»è¦å…§å®¹</a>

    <!-- å°èˆªæ¬„ -->
    <nav aria-label="ä¸»è¦å°èˆª">
        <div class="container">
            <div class="logo"><i class="fas fa-camera" aria-hidden="true"></i>å­¸ç¿’è³‡æº</div>
            <ul class="nav-links">
                <li><a href="index.html"><i class="fas fa-home" aria-hidden="true"></i>å›é¦–é </a></li>
                <li id="user-info"></li>
            </ul>
        </div>
    </nav>

    <!-- é é¢æ¨™é ­ -->
    <header class="page-header">
        <div class="container">
            <h1>å­¸ç¿’è³‡æºåº«</h1>
            <p>åŒ¯é›†å„ç§‘å­¸ç¿’è³‡æ–™ï¼ŒåŠ©ä½ å­¸æ¥­é€²æ­¥</p>
        </div>
    </header>

    <!-- ä¸»è¦å…§å®¹ -->
    <main id="main-content">
        <!-- æœå°‹å€ -->
         <div class="container">
        <section class="search-section">
            <div class="search-box">
                <input type="text" class="search-input" placeholder="æœå°‹å­¸ç¿’è³‡æº..." id="search-input">
                <button class="search-btn" onclick="searchResources()">æœå°‹</button>
            </div>
        </section>
    </div>


        <!-- è³‡æºåˆ†é¡ -->
        <div class="resource-categories" role="tablist" aria-label="è³‡æºåˆ†é¡ç¯©é¸">
            <button class="category-btn active" data-category="all" role="tab" aria-selected="true" aria-controls="all-resources">å…¨éƒ¨è³‡æº</button>
            <button class="category-btn" data-category="math" role="tab" aria-selected="false" aria-controls="math-resources">æ•¸å­¸</button>
            <button class="category-btn" data-category="chinese" role="tab" aria-selected="false" aria-controls="chinese-resources">åœ‹æ–‡</button>
            <button class="category-btn" data-category="english" role="tab" aria-selected="false" aria-controls="english-resources">è‹±æ–‡</button>
            <button class="category-btn" data-category="science" role="tab" aria-selected="false" aria-controls="science-resources">è‡ªç„¶ç§‘å­¸</button>
            <button class="category-btn" data-category="social" role="tab" aria-selected="false" aria-controls="social-resources">ç¤¾æœƒç§‘</button>
        </div>

        <!-- è³‡æºç¶²æ ¼ -->
        <div class="container">
            <div class="resources-grid" id="resources-grid" role="region" aria-label="å­¸ç¿’è³‡æºåˆ—è¡¨">
                <!-- è³‡æºæœƒé€éJavaScriptå‹•æ…‹ç”Ÿæˆ -->
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2023 3Dç­å­¸ç¿’è³‡æºåº«ã€‚çŸ¥è­˜å…±äº«ï¼Œå…±åŒé€²æ­¥ã€‚</p>
        </div>
    </footer>

    <script>
        // å­¸ç¿’è³‡æºè³‡æ–™
        const resourcesData = [
            {
                title: "æ•¸å­¸å…¬å¼å¤§å…¨",
                description: "åŒ…å«æ‰€æœ‰é«˜ä¸­æ•¸å­¸é‡è¦å…¬å¼å’Œå®šç†ï¼Œé™„æœ‰ä¾‹é¡Œè§£æ",
                category: "math",
                link: "https://learnsmart.edu.hk/blog/%E5%85%AC%E5%BC%8F",
                icon: "âˆ‘",
                difficulty: "åˆéš",
                uploadDate: "2023-09-15"
            },
            {
                title: "è‹±æ–‡å–®å­—è¡¨",
                description: "é«˜ä¸­æ ¸å¿ƒ7000å–®å­—æ•´ç†ï¼ŒåŒ…å«ç™¼éŸ³å’Œä¾‹å¥",
                category: "english",
                link: "https://wecan.tw/index.php/2018-12-02-08-34-31/2019-01-03-18-18-31/3000-basic-vocabulary",
                icon: "ABC",
                difficulty: "åˆéš",
                uploadDate: "2023-09-10"
            },
            {
                title: "ä¸­æ–‡å·ä¸€æ–‡è¨€æ–‡æŠ€å·§å¤§å…¨",
                description: "å¤æ–‡è©³ç´°è§£æèˆ‡è³æé™„æ–‡è¨€æ–‡ç·´ç¿’æ–¹æ³•ã€æ–‡ç« èªè­¯",
                category: "chinese",
                link: "https://afterschool.com.hk/blog/358-dse-%E4%B8%AD%E6%96%87-%E6%96%87%E8%A8%80%E6%96%87%E6%8A%80%E5%B7%A7/",
                icon: "æ–‡",
                difficulty: "ä¸­éš",
                uploadDate: "2023-09-18"
            },
            {
                title: "ç‰©ç†å¯¦é©—æ‰‹å†Š",
                description: "12å€‹é‡è¦ç‰©ç†å¯¦é©—æ­¥é©Ÿèˆ‡åŸç†èªªæ˜",
                category: "science",
                link: "#",
                icon: "âš›",
                difficulty: "é€²éš",
                uploadDate: "2023-09-20"
            },
            {
                title: "æ­·å²æ™‚é–“è»¸",
                description: "ä¸­åœ‹èˆ‡ä¸–ç•Œæ­·å²é‡è¦äº‹ä»¶æ™‚é–“è»¸å°ç…§",
                category: "social",
                link: "https://zh.wikipedia.org/wiki/%E4%B8%AD%E5%9B%BD%E5%8E%86%E5%8F%B2%E5%B9%B4%E8%A1%A8",
                icon: "ğŸ“œ",
                difficulty: "åˆéš",
                uploadDate: "2023-09-12"
            },
            {
                title: "åŒ–å­¸å…ƒç´ è¡¨",
                description: "äº’å‹•å¼å…ƒç´ é€±æœŸè¡¨èˆ‡åŒ–å­¸æ€§è³ªèªªæ˜",
                category: "science",
                link: "https://zh.wikipedia.org/zh-tw/%E5%85%83%E7%B4%A0%E5%91%A8%E6%9C%9F%E8%A1%A8",
                icon: "ğŸ§ª",
                difficulty: "ä¸­éš",
                uploadDate: "2023-09-22"
            },
            {
                title: "æ•¸å­¸é¡Œåº«",
                description: "1000+æ•¸å­¸ç·´ç¿’é¡Œï¼Œé™„è©³ç´°è§£ç­”",
                category: "math",
                link: "https://mathspercyyeung.com/%E6%95%B8%E5%AD%B8%E7%B7%B4%E7%BF%92/s3/",
                icon: "Ï€",
                difficulty: "é€²éš",
                uploadDate: "2023-09-25"
            },
            {
                title: "è‹±æ–‡æ–‡æ³•æŒ‡å—",
                description: "å®Œæ•´è‹±æ–‡æ–‡æ³•è¦å‰‡èˆ‡ç·´ç¿’é¡Œ",
                category: "english",
                link: "https://www.ef.com.hk/english-guide/english-grammar/",
                icon: "ğŸ“˜",
                difficulty: "ä¸­éš",
                uploadDate: "2023-09-08"
            }
        ];

        // åˆå§‹åŒ–è³‡æºé é¢
        function initResources() {
            const resourcesGrid = document.getElementById('resources-grid');
            const categoryButtons = document.querySelectorAll('.category-btn');
            const searchInput = document.getElementById('search-input');
            const skipLink = document.querySelector('.skip-link');

            // è·³è½‰éˆæ¥æ¨£å¼è™•ç†
            if (skipLink) {
                skipLink.addEventListener('focus', function() {
                    this.style.top = '0';
                });
                skipLink.addEventListener('blur', function() {
                    this.style.top = '-40px';
                });
            }

            // æ¸²æŸ“è³‡æºå¡ç‰‡
            function renderResources(filter = 'all', searchTerm = '') {
                resourcesGrid.innerHTML = '';
                
                let filteredData = filter === 'all' 
                    ? resourcesData 
                    : resourcesData.filter(item => item.category === filter);
                
                // æœå°‹éæ¿¾
                if (searchTerm) {
                    filteredData = filteredData.filter(item =>
                        item.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
                        item.description.toLowerCase().includes(searchTerm.toLowerCase())
                    );
                }
                
                if (filteredData.length === 0) {
                    const noResults = document.createElement('div');
                    noResults.className = 'no-results';
                    noResults.setAttribute('role', 'alert');
                    noResults.innerHTML = `
                        <h3>æœªæ‰¾åˆ°åŒ¹é…çš„è³‡æº</h3>
                        <p>è«‹å˜—è©¦ä½¿ç”¨ä¸åŒçš„æœå°‹è©æˆ–ç€è¦½æ‰€æœ‰è³‡æº</p>
                    `;
                    resourcesGrid.appendChild(noResults);
                    return;
                }
                
                filteredData.forEach((item, index) => {
                    const resourceCard = document.createElement('div');
                    resourceCard.className = 'resource-card';
                    resourceCard.setAttribute('tabindex', '0');
                    resourceCard.setAttribute('role', 'article');
                    resourceCard.setAttribute('aria-labelledby', `resource-title-${index}`);
                    
                    resourceCard.innerHTML = `
                        <div class="resource-icon" aria-hidden="true">${item.icon}</div>
                        <div class="resource-content">
                            <h3 class="resource-title" id="resource-title-${index}">${item.title}</h3>
                            <p class="resource-description">${item.description}</p>
                            <a href="${item.link}" class="resource-link" target="_blank" 
                               aria-label="æŸ¥çœ‹${item.title}è³‡æºï¼Œå°‡åœ¨æ–°è¦–çª—æ‰“é–‹">
                                æŸ¥çœ‹è³‡æº <i class="fas fa-external-link-alt" aria-hidden="true"></i>
                            </a>
                            <div class="resource-meta">
                                <span>é›£åº¦: ${item.difficulty}</span>
                                <span>ä¸Šå‚³: ${item.uploadDate}</span>
                            </div>
                        </div>
                    `;
                    
                    resourcesGrid.appendChild(resourceCard);
                });
            }

            // åˆ†é¡æŒ‰éˆ•äº‹ä»¶
            categoryButtons.forEach(button => {
                button.addEventListener('click', () => {
                    categoryButtons.forEach(btn => {
                        btn.classList.remove('active');
                        btn.setAttribute('aria-selected', 'false');
                    });
                    button.classList.add('active');
                    button.setAttribute('aria-selected', 'true');
                    renderResources(button.dataset.category, searchInput.value);
                });
                
                // æ·»åŠ éµç›¤æ”¯æŒ
                button.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        button.click();
                    }
                });
            });

            // æœå°‹åŠŸèƒ½
            searchInput.addEventListener('input', () => {
                const activeCategory = document.querySelector('.category-btn.active').dataset.category;
                renderResources(activeCategory, searchInput.value);
            });

            // åˆå§‹æ¸²æŸ“
            renderResources();
        }

        // æœå°‹å‡½æ•¸
        function searchResources() {
            const searchTerm = document.getElementById('search-input').value;
            const activeCategory = document.querySelector('.category-btn.active').dataset.category;
            renderResources(activeCategory, searchTerm);
        }

        // ç•¶é é¢è¼‰å…¥å®Œæˆæ™‚åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', initResources);
    </script>
<script>
// æª¢æŸ¥ç™»å…¥ç‹€æ…‹
function checkAuth() {
    const isLoggedIn = localStorage.getItem('isLoggedIn');
    const authToken = localStorage.getItem('authToken');
    
    if (!isLoggedIn || !authToken) {
        window.location.href = 'login.html';
        return false;
    }
    
    try {
        // é©—è­‰tokenæ˜¯å¦æœ‰æ•ˆ
        const tokenData = JSON.parse(atob(authToken));
        const currentTime = Date.now();
        const tokenAge = currentTime - tokenData.timestamp;
        
        // Tokenæœ‰æ•ˆæœŸ24å°æ™‚
        if (tokenAge > 24 * 60 * 60 * 1000) {
            localStorage.removeItem('authToken');
            localStorage.removeItem('isLoggedIn');
            localStorage.removeItem('userRole');
            window.location.href = 'login.html';
            return false;
        }
        
        return true;
    } catch (error) {
        localStorage.removeItem('authToken');
        localStorage.removeItem('isLoggedIn');
        localStorage.removeItem('userRole');
        window.location.href = 'login.html';
        return false;
    }
}

// é é¢è¼‰å…¥æ™‚æª¢æŸ¥æ¬Šé™
if (!checkAuth()) {
    // å¦‚æœæœªç™»å…¥ï¼Œæœƒè‡ªå‹•è·³è½‰åˆ°ç™»å…¥é é¢
}



// é é¢è¼‰å…¥æ™‚é¡¯ç¤ºç”¨æˆ¶
document.addEventListener('DOMContentLoaded', function() {
    displayCurrentUser();
    
    // å®šæœŸæª¢æŸ¥ç™»å…¥ç‹€æ…‹ï¼ˆæ¯5åˆ†é˜ï¼‰
    setInterval(checkAuth, 5 * 60 * 1000);
});
</script>
</body>

</html>

