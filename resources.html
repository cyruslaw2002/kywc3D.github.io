<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>學習資源 - 3D班</title>
    <style>
        /* 共用樣式 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', 'Microsoft JhengHei', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* 導航欄樣式 */
        nav {
            background: #35424a;
            color: white;
            padding: 1rem 0;
        }
        
        nav .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .nav-links {
            list-style: none;
            display: flex;
        }
        
        .nav-links li {
            margin-left: 2rem;
        }
        
        .nav-links a {
            color: white;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .nav-links a:hover {
            color: #e8491d;
        }
        
        /* 頁面標頭 */
        .page-header {
            text-align: center;
            padding: 3rem 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .page-header h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        
        /* 資源分類 */
        .resource-categories {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 1rem;
            margin: 2rem 0;
            padding: 0 1rem;
        }
        
        .category-btn {
            padding: 0.8rem 2rem;
            border: 2px solid #35424a;
            background: white;
            color: #35424a;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            font-size: 1rem;
        }
        
        .category-btn:hover,
        .category-btn.active {
            background: #35424a;
            color: white;
        }
        
        /* 資源卡片 */
        .resources-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 2rem;
            padding: 2rem 0;
        }
        
        .resource-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            overflow: hidden;
            transition: transform 0.3s;
        }
        
        .resource-card:hover {
            transform: translateY(-5px);
        }
        
        .resource-icon {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1.5rem;
            text-align: center;
            font-size: 2rem;
        }
        
        .resource-content {
            padding: 1.5rem;
        }
        
        .resource-title {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            color: #35424a;
        }
        
        .resource-description {
            color: #666;
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }
        
        .resource-link {
            display: inline-block;
            padding: 0.8rem 1.5rem;
            background: #35424a;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            transition: background 0.3s;
        }
        
        .resource-link:hover {
            background: #e8491d;
        }
        
        .resource-meta {
            display: flex;
            justify-content: space-between;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #eee;
            color: #888;
            font-size: 0.9rem;
        }
        
        /* 搜尋區 */
        .search-section {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            margin: 2rem 0;
            box-shadow: 0 2px 15px rgba(0,0,0,0.1);
        }
        
        .search-box {
            display: flex;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .search-input {
            flex: 1;
            padding: 1rem;
            border: 2px solid #ddd;
            border-radius: 6px 0 0 6px;
            font-size: 1rem;
        }
        
        .search-btn {
            padding: 1rem 1.5rem;
            background: #35424a;
            color: white;
            border: none;
            border-radius: 0 6px 6px 0;
            cursor: pointer;
        }
        
        /* 響應式設計 */
        @media (max-width: 768px) {
            .resources-grid {
                grid-template-columns: 1fr;
            }
            
            .resource-categories {
                flex-direction: column;
                align-items: center;
            }
            
            .category-btn {
                width: 250px;
            }
            
            .nav-links {
                flex-direction: column;
            }
            
            .nav-links li {
                margin: 0.5rem 0;
            }
            
            .search-box {
                flex-direction: column;
            }
            
            .search-input {
                border-radius: 6px;
                margin-bottom: 1rem;
            }
            
            .search-btn {
                border-radius: 6px;
            }
        }
        
        /* 頁尾樣式 */
        footer {
            background: #35424a;
            color: white;
            text-align: center;
            padding: 2rem 0;
            margin-top: 3rem;
        }
    </style>
</head>
<body>
    <!-- 導航欄 -->
    <nav>
        <div class="container">
            <div class="logo">學習資源</div>
            <ul class="nav-links">
                <li><a href="index.html">回首頁</a></li>
            </ul>
        </div>
    </nav>

    <!-- 頁面標頭 -->
    <header class="page-header">
        <div class="container">
            <h1>學習資源庫</h1>
            <p>匯集各科學習資料，助你學業進步</p>
        </div>
    </header>

    <!-- 搜尋區 -->
    <div class="container">
        <section class="search-section">
            <div class="search-box">
                <input type="text" class="search-input" placeholder="搜尋學習資源..." id="search-input">
                <button class="search-btn" onclick="searchResources()">搜尋</button>
            </div>
        </section>
    </div>

    <!-- 資源分類 -->
    <div class="resource-categories">
        <button class="category-btn active" data-category="all">全部資源</button>
        <button class="category-btn" data-category="math">數學</button>
        <button class="category-btn" data-category="chinese">國文</button>
        <button class="category-btn" data-category="english">英文</button>
        <button class="category-btn" data-category="science">自然科學</button>
        <button class="category-btn" data-category="social">社會科</button>
    </div>

    <!-- 資源網格 -->
    <div class="container">
        <div class="resources-grid" id="resources-grid">
            <!-- 資源會透過JavaScript動態生成 -->
        </div>
    </div>

    <footer>
        <div class="container">
            <p>&copy; 2023 3D班學習資源庫。知識共享，共同進步。</p>
        </div>
    </footer>

    <script>
        // 學習資源資料
        const resourcesData = [
            {
                title: "數學公式大全",
                description: "包含所有高中數學重要公式和定理，附有例題解析",
                category: "math",
                link: "https://learnsmart.edu.hk/blog/%E5%85%AC%E5%BC%8F",
                icon: "∑",
                difficulty: "初階",
                uploadDate: "2023-09-15"
            },
            {
                title: "英文單字表",
                description: "高中核心7000單字整理，包含發音和例句",
                category: "english",
                link: "https://wecan.tw/index.php/2018-12-02-08-34-31/2019-01-03-18-18-31/3000-basic-vocabulary",
                icon: "ABC",
                difficulty: "初階",
                uploadDate: "2023-09-10"
            },
            {
                title: "中文卷一文言文技巧大全",
                description: "古文詳細解析與賞析附文言文練習方法、文章語譯",
                category: "chinese",
                link: "https://afterschool.com.hk/blog/358-dse-%E4%B8%AD%E6%96%87-%E6%96%87%E8%A8%80%E6%96%87%E6%8A%80%E5%B7%A7/",
                icon: "文",
                difficulty: "中階",
                uploadDate: "2023-09-18"
            },
            {
                title: "物理實驗手冊",
                description: "12個重要物理實驗步驟與原理說明",
                category: "science",
                link: "#",
                icon: "⚛",
                difficulty: "進階",
                uploadDate: "2023-09-20"
            },
            {
                title: "歷史時間軸",
                description: "中國與世界歷史重要事件時間軸對照",
                category: "social",
                link: "https://zh.wikipedia.org/wiki/%E4%B8%AD%E5%9B%BD%E5%8E%86%E5%8F%B2%E5%B9%B4%E8%A1%A8",
                icon: "📜",
                difficulty: "初階",
                uploadDate: "2023-09-12"
            },
            {
                title: "化學元素表",
                description: "互動式元素週期表與化學性質說明",
                category: "science",
                link: "https://zh.wikipedia.org/zh-tw/%E5%85%83%E7%B4%A0%E5%91%A8%E6%9C%9F%E8%A1%A8",
                icon: "🧪",
                difficulty: "中階",
                uploadDate: "2023-09-22"
            },
            {
                title: "數學題庫",
                description: "1000+數學練習題，附詳細解答",
                category: "math",
                link: "https://mathspercyyeung.com/%E6%95%B8%E5%AD%B8%E7%B7%B4%E7%BF%92/s3/",
                icon: "π",
                difficulty: "進階",
                uploadDate: "2023-09-25"
            },
            {
                title: "英文文法指南",
                description: "完整英文文法規則與練習題",
                category: "english",
                link: "https://www.ef.com.hk/english-guide/english-grammar/",
                icon: "📘",
                difficulty: "中階",
                uploadDate: "2023-09-08"
            }
        ];

        // 初始化資源頁面
        function initResources() {
            const resourcesGrid = document.getElementById('resources-grid');
            const categoryButtons = document.querySelectorAll('.category-btn');
            const searchInput = document.getElementById('search-input');

            // 渲染資源卡片
            function renderResources(filter = 'all', searchTerm = '') {
                resourcesGrid.innerHTML = '';
                
                let filteredData = filter === 'all' 
                    ? resourcesData 
                    : resourcesData.filter(item => item.category === filter);
                
                // 搜尋過濾
                if (searchTerm) {
                    filteredData = filteredData.filter(item =>
                        item.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
                        item.description.toLowerCase().includes(searchTerm.toLowerCase())
                    );
                }
                
                filteredData.forEach(item => {
                    const resourceCard = document.createElement('div');
                    resourceCard.className = 'resource-card';
                    
                    resourceCard.innerHTML = `
                        <div class="resource-icon">${item.icon}</div>
                        <div class="resource-content">
                            <h3 class="resource-title">${item.title}</h3>
                            <p class="resource-description">${item.description}</p>
                            <a href="${item.link}" class="resource-link" target="_blank">查看資源</a>
                            <div class="resource-meta">
                                <span>難度: ${item.difficulty}</span>
                                <span>上傳: ${item.uploadDate}</span>
                            </div>
                        </div>
                    `;
                    
                    resourcesGrid.appendChild(resourceCard);
                });
            }

            // 分類按鈕事件
            categoryButtons.forEach(button => {
                button.addEventListener('click', () => {
                    categoryButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    renderResources(button.dataset.category, searchInput.value);
                });
            });

            // 搜尋功能
            searchInput.addEventListener('input', () => {
                const activeCategory = document.querySelector('.category-btn.active').dataset.category;
                renderResources(activeCategory, searchInput.value);
            });

            // 初始渲染
            renderResources();
        }

        // 搜尋函數
        function searchResources() {
            const searchTerm = document.getElementById('search-input').value;
            const activeCategory = document.querySelector('.category-btn.active').dataset.category;
            renderResources(activeCategory, searchTerm);
        }

        // 當頁面載入完成時初始化
        document.addEventListener('DOMContentLoaded', initResources);
    </script>
</body>
<script>
// 檢查登入狀態
function checkAuth() {
    const isLoggedIn = localStorage.getItem('isLoggedIn');
    const authToken = localStorage.getItem('authToken');
    
    if (!isLoggedIn || !authToken) {
        window.location.href = 'login.html';
        return false;
    }
    
    try {
        // 驗證token是否有效
        const tokenData = JSON.parse(atob(authToken));
        const currentTime = Date.now();
        const tokenAge = currentTime - tokenData.timestamp;
        
        // Token有效期24小時
        if (tokenAge > 24 * 60 * 60 * 1000) {
            localStorage.removeItem('authToken');
            localStorage.removeItem('isLoggedIn');
            localStorage.removeItem('userRole');
            window.location.href = 'login.html';
            return false;
        }
        
        return true;
    } catch (error) {
        localStorage.removeItem('authToken');
        localStorage.removeItem('isLoggedIn');
        localStorage.removeItem('userRole');
        window.location.href = 'login.html';
        return false;
    }
}

// 頁面載入時檢查權限
if (!checkAuth()) {
    // 如果未登入，會自動跳轉到登入頁面
}

// 顯示當前用戶
    function displayCurrentUser() {
        const userRole = localStorage.getItem('userRole');
        if (userRole) {
            // 在導航欄顯示用戶信息
            const userInfo = document.createElement('li');
            userInfo.innerHTML = `<span style="color: #e8491d;">歡迎, ${userRole}</span>`;
            
            const navLinks = document.querySelector('.nav-links');
            navLinks.appendChild(userInfo);
        }
    }

    // 頁面載入時顯示用戶
    document.addEventListener('DOMContentLoaded', function() {
        displayCurrentUser();
        
        // 定期檢查登入狀態（每5分鐘）
        setInterval(checkAuth, 5 * 60 * 1000);
    });
    </script>
</script>

</html>
